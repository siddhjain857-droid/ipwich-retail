<h1>Your Cart</h1>

<table>
  <tr><th>Product</th><th>Qty</th><th>Price</th><th>Line</th><th></th></tr>
  {% for line in items %}
    <tr>
      <td><a href="{% url 'detail' line.product.pk %}">{{ line.product.name }}</a></td>
      <td>
        <form method="post" action="{% url 'update_cart' line.product.pk %}">
          {% csrf_token %}
          <input type="number" name="qty" min="1" value="{{ line.qty }}">
          <button type="submit">Update</button>
        </form>
      </td>
      <td>£{{ line.product.price }}</td>
      <td>£{{ line.line_total }}</td>
      <td><a href="{% url 'remove_from_cart' line.product.pk %}">Remove</a></td>
    </tr>
  {% empty %}
    <tr><td colspan="5">Your cart is empty.</td></tr>
  {% endfor %}
</table>

<p><strong>Total: £{{ total }}</strong></p>

<div style="display:flex; gap: 1rem;">
  <a href="{% url 'clear_cart' %}">Clear Cart</a>
  <a href="{% url 'checkout' %}">Proceed to Checkout</a>
</div>
